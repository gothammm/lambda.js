//Lambda.js
//Version: v1.0
//Author: Gautham R
(function(){var e=this;e.lambda={};var t=!1;lambda.config={init:function(e){t=e&&e===!0?!0:!1,this.isOfTypeAttached=t,this.isOfTypeAttached&&lambda._setActionsToArrayPrototype.set()},isOfTypeAttached:t},lambda._util={mapKeyValue:function(e){var t=[];e||lambda.exception.throwEx("obj is undefined"),"object"!=typeof e&&lambda.exception.throwEx("obj must be of type object");for(var r in e)t.push({key:r,value:e[r]});return t}},lambda.exception={throwEx:function(e){throw console.log(e),e}},lambda._query={add:function(e){for(var t=lambda._util.mapKeyValue(e),r=0;t.length>r;r++){var a=t[r],n={};n[a.key]=a.value,this.conditions.push(n)}return this},conditions:[],type:{name:"query",hex:"7175657279"},isOfTypeQuery:function(e){if(!e)return!1;if(!e.type)return!1;if(e.type){var t=e.type;if(!t)return!1;if("object"!=typeof t)return!1;if(!t.name||!t.hex)return!1;if("query"==t.name&&"7175657279"==t.hex)return!0}return!1}},lambda.query=lambda._query,lambda._actions={_select:function(e,t){var r,a,n,o=0,i=this,l=!1,s={},u=[];for(e||lambda.exception.throwEx("Array is undefined"),t||(t=[]),e.hasOwnProperty("length")||"object"!=typeof e||lambda.exception.throwEx("'arr' parameter must be of type Array"),t.hasOwnProperty("length")||"object"!=typeof t||lambda.exception.throwEx("'props' parameter must be of type Array"),a=e.length,n=t.length,1==t.length&&(l=!0);a>o;o++){var c=e[o];if(l){var f=i.first(t),h=c[f];h&&u.push(h)}else{for(s={},r=0;n>r;r++){var f=t[r],h=c[f];h&&(s[f]=h)}u.push(s)}}return u},_first:function(e){return e||lambda.exception.throwEx("Array is undefined"),e.hasOwnProperty("length")||"object"!=typeof e||lambda.exception.throwEx("'arr' parameter must be of type Array"),e.length>0?e[0]:e},_where:function(e,t){var r=this;e||lambda.exception.throwEx("Array is undefined"),e.hasOwnProperty("length")||"object"!=typeof e||lambda.exception.throwEx("'arr' parameter must be of type Array"),t||lambda.exception.throwEx("'query' is undefined"),"object"!=typeof t&&lambda.exception.throwEx("'query' parameter must be of type 'object'");var a=0,n=e.length,o=[],i=lambda._query.isOfTypeQuery(t);if(i)for(var l=t.conditions,s=l.length;s>a;a++){var u=l[a],c=lambda.first(lambda._util.mapKeyValue(u)),f=c.key,h=c.value,y=o.length>0?!0:!1,p=y?o:e;switch(f){case"or":o=r._actions._where_or(p,h);break;case"and":o=r._actions._where_and(p,h);break;case"like":o=r._actions._where_like(p,h);break;default:}}else for(var d=lambda.first(lambda._util.mapKeyValue(t));n>a;a++){var m=e[a];if(m){var b=d.key,v=d.value;null!=m[b]&&void 0!=m[b]&&m[b]==v&&o.push(m)}}return o},_where_like:function(e,t){var r=[],a=0,n=lambda._util.mapKeyValue(t);t=lambda.first(n);for(var o=e.length;o>a;a++){var i=e[a];"number"!=typeof t.value&&null!=i[t.key]&&void 0!=i[t.key]&&i[t.key].indexOf(t.value)>-1&&r.push(i)}return r},_where_and:function(e,t){for(var r,a=[],n=0,o=lambda._util.mapKeyValue(t),i=e.length,l=o.length;i>n;n++){var s=e[n],u=!1,c=!0;for(r=0;l>r;r++){var f=o[r];null!=s[f.key]&&void 0!=s[f.key]&&s[f.key]==f.value?c&&(u=!0):(u=!1,c=!1)}u&&a.push(s)}return a},_where_or:function(e,t){for(var r,a=[],n=0,o=lambda._util.mapKeyValue(t),i=e.length,l=o.length;i>n;n++){var s=e[n],u=!1;for(r=0;l>r;r++){var c=o[r];null!=s[c.key]&&void 0!=s[c.key]&&s[c.key]==c.value&&(u=!0)}u&&a.push(s)}return a},_getActions:function(){var e=this;return{select:e._select,first:e._first,where:e._where}}},lambda._setActionsToArrayPrototype={actions:{collection:{},getSelectAction:function(){return this.collection.select},getFirstAction:function(){return this.collection.first},getWhereAction:function(){return this.collection.where}},set:function(){var e=lambda._actions._getActions();this.actions.collection=e,this._setForArraySelect(),this._setForArrayFirst()},_setForArraySelect:function(){var e=this.actions;Array.prototype.select=function(t){var r=this;return e.getSelectAction()(r,t)}},_setForArrayFirst:function(){var e=this.actions;Array.prototype.first=function(){var t=this;return e.getFirstAction()(t)}},_setForArrayWhere:function(){var e=this.actions;Array.prototype.where=function(t){return e.getWhereAction()(t)}}};var r=lambda._actions._getActions();lambda.select=r.select,lambda.first=r.first,lambda.where=r.where,"undefined"!=typeof module&&(module.exports=lambda)})();