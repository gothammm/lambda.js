//Lambda.js
//Version: v0.1
//Author: Gautham R

(function(){var e=this;e.lambda={};var t=!1;lambda.config={init:function(e){t=e&&e===!0?!0:!1,this.isOfTypeAttached=t,this.isOfTypeAttached&&lambda._setActionsToArrayPrototype.set()},isOfTypeAttached:t},lambda._util={mapKeyValue:function(e){var t=[];e||lambda.exception.throwEx("obj is undefined"),"object"!=typeof e&&lambda.exception.throwEx("obj must be of type object");for(var r in e)t.push({key:r,value:e[r]});return t}},lambda.exception={throwEx:function(e){throw console.log(e),e}},lambda._query={add:function(e){return this.conditions.push(e),this},conditions:[],type:{name:"query",hex:"7175657279"},isOfTypeQuery:function(e){if(!e)return!1;if(!e.type)return!1;if(e.type){var t=e.type;if(!t)return!1;if("object"!=typeof t)return!1;if(!t.name||!t.hex)return!1;if("query"==t.name&&"7175657279"==t.hex)return!0}return!1}},lambda.query=lambda._query,lambda._actions={_select:function(e,t){var r,a,n,o=0,i=this,s=!1,c={},l=[];for(e||lambda.exception.throwEx("Array is undefined"),t||(t=[]),e.hasOwnProperty("length")||"object"!=typeof e||lambda.exception.throwEx("'arr' parameter must be of type Array"),t.hasOwnProperty("length")||"object"!=typeof t||lambda.exception.throwEx("'props' parameter must be of type Array"),a=e.length,n=t.length,1==t.length&&(s=!0);a>o;o++){var u=e[o];if(s){var h=i.first(t),f=u[h];f&&l.push(f)}else{for(c={},r=0;n>r;r++){var h=t[r],f=u[h];f&&(c[h]=f)}l.push(c)}}return l},_first:function(e){return e||lambda.exception.throwEx("Array is undefined"),e.hasOwnProperty("length")||"object"!=typeof e||lambda.exception.throwEx("'arr' parameter must be of type Array"),e.length>0?e[0]:e},_where:function(e,t){var r=this;e||lambda.exception.throwEx("Array is undefined"),e.hasOwnProperty("length")||"object"!=typeof e||lambda.exception.throwEx("'arr' parameter must be of type Array"),t||lambda.exception.throwEx("'query' is undefined"),"object"!=typeof t&&lambda.exception.throwEx("'query' parameter must be of type 'object'");var a=0,n=e.length,o=[],i=lambda._query.isOfTypeQuery(t);if(i)for(var s=t.conditions,c=s.length;c>a;a++){var l=s[a],u=lambda.first(lambda._util.mapKeyValue(l)),h=u.key,f=u.value,y=o.length>0?!0:!1,p=y?o:e;switch(h){case"or":o=r._actions._where_or(p,f);break;case"and":o=r._actions._where_and(p,f);break;default:}}else for(var d=lambda.first(lambda._util.mapKeyValue(t));n>a;a++){var m=e[a];if(m){var b=d.key,_=d.value;m[b]&&m[b]==_&&o.push(m)}}return o},_where_and:function(e,t){for(var r,a=[],n=0,o=lambda._util.mapKeyValue(t),i=e.length,s=o.length;i>n;n++){var c=e[n],l=!1,u=!0;for(r=0;s>r;r++){var h=o[r];c[h.key]&&c[h.key]==h.value?u&&(l=!0):(l=!1,u=!1)}l&&a.push(c)}return a},_where_or:function(e,t){for(var r,a=[],n=0,o=lambda._util.mapKeyValue(t),i=e.length,s=o.length;i>n;n++){var c=e[n],l=!1;for(r=0;s>r;r++){var u=o[r];c[u.key]&&c[u.key]==u.value&&(l=!0)}l&&a.push(c)}return a},_getActions:function(){var e=this;return{select:e._select,first:e._first,where:e._where}}},lambda._setActionsToArrayPrototype={actions:{collection:{},getSelectAction:function(){return this.collection.select},getFirstAction:function(){return this.collection.first},getWhereAction:function(){return this.collection.where}},set:function(){var e=lambda._actions._getActions();this.actions.collection=e,this._setForArraySelect(),this._setForArrayFirst()},_setForArraySelect:function(){var e=this.actions;Array.prototype.select=function(t){var r=this;return e.getSelectAction()(r,t)}},_setForArrayFirst:function(){var e=this.actions;Array.prototype.first=function(){var t=this;return e.getFirstAction()(t)}},_setForArrayWhere:function(){var e=this.actions;Array.prototype.where=function(t){return e.getWhereAction()(t)}}};var r=lambda._actions._getActions();lambda.select=r.select,lambda.first=r.first,lambda.where=r.where,"undefined"!=typeof module&&(module.exports=lambda)})();