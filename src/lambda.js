//Lambda.js
//Version: v0.1
//Author: Gautham R

(function(){var e=this;e.lambda={};var t=false;lambda.config={init:function(e){t=e&&e===true?true:false;this.isOfTypeAttached=t;if(this.isOfTypeAttached){lambda._setActionsToArrayPrototype.set()}},isOfTypeAttached:t};lambda._util={mapKeyValue:function(e){var t=[];if(!e)lambda.exception.throwEx("obj is undefined");if(typeof e!="object")lambda.exception.throwEx("obj must be of type object");for(var n in e){t.push({key:n,value:e[n]})}return t}};lambda.exception={throwEx:function(e){console.log(e);throw e}};lambda._query={or:false,and:false,expression:[],type:{name:"query",hex:"7175657279"},isOfTypeQuery:function(e){if(!e){return false}if(!e.type){return false}if(e.type){var t=e.type;if(!t)return false;if(typeof t!="object")return false;if(!t.name||!t.hex)return false;if(t.name=="query"&&t.hex=="7175657279")return true}return false}};lambda._actions={_select:function(e,t){var n=0,r,i=this,s,o,u=false,a={},f=[];if(!e)lambda.exception.throwEx("Array is undefined");if(!t)t=[];if(!e.hasOwnProperty("length")&&typeof e=="object")lambda.exception.throwEx("'arr' parameter must be of type Array");if(!t.hasOwnProperty("length")&&typeof t=="object")lambda.exception.throwEx("'props' parameter must be of type Array");s=e.length;o=t.length;if(t.length==1){u=true}for(;n<s;n++){var l=e[n];if(u){var c=i.first(t);var h=l[c];if(h){f.push(h)}}else{a={};for(r=0;r<o;r++){var c=t[r];var h=l[c];if(h){a[c]=h}}f.push(a)}}return f},_first:function(e){if(!e)lambda.exception.throwEx("Array is undefined");if(!e.hasOwnProperty("length")&&typeof e=="object")lambda.exception.throwEx("'arr' parameter must be of type Array");if(e.length>0){return e[0]}return e},_where:function(e,t){var n=this;if(!e)lambda.exception.throwEx("Array is undefined");if(!e.hasOwnProperty("length")&&typeof e=="object")lambda.exception.throwEx("'arr' parameter must be of type Array");if(!t)lambda.exception.throwEx("'query' is undefined");if(typeof t!="object")lambda.exception.throwEx("'query' parameter must be of type 'object'");var r=0,i,s=e.length,o=[];var u=lambda._query.isOfTypeQuery(t);if(!u){var a=lambda.first(lambda._util.mapKeyValue(t));for(;r<s;r++){var f=e[r];if(f){var l=a.key;var c=a.value;if(f[l]&&f[l]==c){o.push(f)}}}}return o},_getActions:function(){var e=this;return{select:e._select,first:e._first,where:e._where}}};lambda._setActionsToArrayPrototype={actions:{collection:{},getSelectAction:function(){return this.collection.select},getFirstAction:function(){return this.collection.first},getWhereAction:function(){return this.collection.where}},set:function(){var e=lambda._actions._getActions();this.actions.collection=e;this._setForArraySelect();this._setForArrayFirst()},_setForArraySelect:function(){var e=this.actions;Array.prototype.select=function(t){var n=this;return e.getSelectAction()(n,t)}},_setForArrayFirst:function(){var e=this.actions;Array.prototype.first=function(){var t=this;return e.getFirstAction()(t)}},_setForArrayWhere:function(){var e=this.actions;Array.prototype.where=function(t){var n=this;return e.getWhereAction()(t)}}};var n=lambda._actions._getActions();lambda.select=n.select;lambda.first=n.first;lambda.where=n.where;if(typeof module!="undefined"){module.exports=lambda}})();
